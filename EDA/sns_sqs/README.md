


### SNS_SQS

- 스프링 애플리케이션과 AWS 서비스인 SNS, SQS를 이용하여 이벤트 기반 아키텍처를 구현하고 있다.


#### 스프링 애플리케이션, SNS, SQS를 이용하여 이벤트 기반 아키텍처 구조

- 위 그림을 통해서 확인할 수 있듯이 몇가지 단계를 통해서 이벤트를 발행하고 수신하게 된다.
- 유저가 유저 인터페이스(API)를 통해서 애플리케이션에게 요청을 하면 해당 애플리케이션은 기능을 수행한다.
- 애플리케이션이 기능을 수행하는 도중 SNS에게 이벤트를 발행한다.
- SNS는 구독중인 SQS에게 메시지를 전송한다.
- SQS에 존재하는 메시지를 애플리케이션이 소비하여 해당 이벤트에 대한 기능들을 수행한다.
- 해당 기능들이 우리가 원하는 대로 작동만한다면 좋겠지만, 네트워크 문제, 비지니스 로직의 문제로 인하여 메시지가 제대로 송수신이 안되는 경우가 발생할 수 있다.
  - 이벤트 기반 아키텍처를 사용하게되면 해당 기능의 흐름을 정확히 파악하기 어려운 문제가 발생한다.
  - 때문에 문제가 발생하였을 때 실패한 메시지를 제대로 보관하고 있지 않다거나, 해당 문제가 발생하였을 때 자동화를 하지 않거나, 모니터링을 수행하지 않게되면 개발자가 문제를 해결할 수 없거나 유저 입장에서도 제대로된 서비스를 사용할 수 없다.
- 때문에 단순히 기능을 만드는 것 뿐만 아니라 운영시 발생할 수 있는 이슈들에 대하여 대비를 할 수 있어야 한다.


#### 스프링 애플리케이션, SNS, SQS를 이용하여 이벤트 기반 아키텍처 운영시 발생할 수 있는 문제
- 이때 우리가 고려해야할 사항은 세가지이다.
  - 애플리케이션에서 SNS를 전송시 발생할 수 있는 문제
  - SNS에서 SQS에게 메시지를 전송시 발생할 수 있는 문제
  - SQS에서 애플리케이션에 전송시 발생할 수 있는 문제
  - 애플리케이션-SNS-SQS-애플리케이션으 흐름이 이어지는 상황에서 우리가 사용자에게 메시지를 어떻게 자동으로 다시 재전송할 수 있을지에 대하여 고민을 해봐야 한다.
  - 